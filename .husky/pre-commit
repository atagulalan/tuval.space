#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged (format staged files)
echo "ğŸ“ Formatting staged files..."
pnpm exec lint-staged || {
  echo "âŒ Lint-staged failed. Please fix formatting issues."
  exit 1
}

# Run lint on entire project
echo "ğŸ” Running lint on entire project..."
pnpm run lint || {
  echo "âŒ Lint failed. Please fix linting errors before committing."
  exit 1
}

# Run typecheck on entire project
echo "ğŸ” Running typecheck..."
pnpm run typecheck || {
  echo "âŒ Typecheck failed. Please fix type errors before committing."
  exit 1
}

# Run tests (unit + snapshot)
echo "ğŸ§ª Running tests (unit + snapshot)..."
pnpm run test -- --passWithNoTests || {
  echo "âŒ Tests failed. Please fix failing tests before committing."
  exit 1
}

echo "âœ… All checks passed! (lint, typecheck, tests)"












